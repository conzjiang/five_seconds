<article>
  <fieldset>
    <input type="text"
           name="experience[title]"
           value="<%= experience.title %>"
           placeholder="Job Title">
  </fieldset>

  <fieldset>
    <input id="company"
           type="text"
           name="company[name]"
           value="<%= experience.company && experience.company.name %>"
           placeholder="Company">
    <input type="hidden"
           name="experience[company_id]"
           value="<%= experience.company_id %>">
  </fieldset>

  <fieldset class="with-label">
    <label for="experience_start_date">Start Date</label>
    <%= date_select(
      "experience",
      "start_date",
      start_year: Date.current.year,
      end_year: 1990,
      add_month_numbers: true,
      discard_day: true,
      prompt: true
    ) %>
  </fieldset>

  <fieldset class="with-label">
    <label for="experience_end_date">
      End Date
      <small>(Leave this field blank if you currently work here!)</small>
    </label>
    <%= date_select(
      "experience",
      "end_date",
      start_year: Date.current.year,
      end_year: 1990,
      add_month_numbers: true,
      discard_day: true,
      prompt: true
    ) %>
  </fieldset>

  <div id="items" class="fieldset-section"></div>
</article>

<script>
  $(function () {
    new FiveSeconds.Views.ListItemView({
      el: $(".fieldset-section"),
      items: <%= @experience.items.pluck(:description).to_json.html_safe %>
    });
  });
</script>
